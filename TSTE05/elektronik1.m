E1 = 5;
E2 = 6;

I1 = 2*10^(-3);
I2 = 4*10^(-3);

R1 = 17*10^3;
R2 = 2.5*10^3;
R3 = 3.5*10^3;
R4 = 6.5*10^3;
R5 = 2*10^3;
R6 = 4.5*10^3;
R7 = 2.5*10^3;
R8 = 12*10^3;
R9 = 17.5*10^3;
R10 = 2.5*10^3;

%Försök 1:
% 
% A = [(1/R5 + 1/R2) -1/R2 -1/R5 0  0;...
%     -1/R2 (1/R2 + 1/R6) -1/R6 0 -1/R4;...
%     -1/R5 -1/R6 (1/R6 + 1/R9 + 1/R5) -1/R10 0;...
%     0 0 -1/R10 1/R10 0;...
%     0 -1/R4 0 0 (1/R4 +1/R7 +1/R3)];
% 
% B = [-(-I2 + E1/R5);...
%     0;...
%     E1/R5;...
%     -I1;...
%     E2/R3];
   

%Försök 2: kladd ;DDDD som fungerar......

A = [-(1/R5 + 1/R2) 1/R2 1/R5 0 0;...
    1/R2 -(1/R2 + 1/R6 +1/R4) 1/R6 0 1/R4;...
    1/R5 1/R6 -(1/R6 + 1/R9 + 1/R5 +1/R10) 1/R10 0;...
    0 0 1/R10 -1/R10 0;...
    0 1/R4 0 0 -(1/R4 +1/R7 +1/R3)];

B = [(-I2 + E1/R5);...
    0;...
    -E1/R5;...
    I1;...
    -E2/R3];


X=A\B

% tomgångsspänningen V4 =  8.5263 den som är Uab
% Efter kortslutning är V4 = 0, tar bort den raden och kolonnen,

V4 =  8.5263;

C= [-(1/R5 + 1/R2) 1/R2 1/R5 0;...
    1/R2 -(1/R2 + 1/R6 +1/R4) 1/R6 1/R4;...
    1/R5 1/R6 -(1/R6 + 1/R9 + 1/R5 +1/R10) 0;...
    0 1/R4 0 -(1/R4 +1/R7 +1/R3)];

D = [(-I2 + E1/R5);...
    0;...
    -E1/R5;...
    E2/R3];

V= C\D

%Ik + I1 + (0-V3)/R10 = 0, kirchoffs strömlag
% V3 = 7.3824;
% Uab = V3;
% 
% 
% Ik = V3/R10 - I1;
% 
% Ri = V3/Ik

%V3 = 6.5000;
%V3 = 7.382;
V3 = V(3);

Ik = V3/R10 - I1

Ri = V4/Ik


